; ============================
;  PlatformIO config for
;  Waveshare ESP32-S3 1.85" Touch LCD
; ============================

[platformio]
default_envs = waveshare_185

[env:waveshare_185]
; Arduino-ESP32 3.x (via pioarduino)
platform  = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
framework = arduino

; ESP32-S3 devkit as base (matches Waveshare S3 pretty well)
board = esp32-s3-devkitc-1

; ----- Serial / upload -----
upload_speed  = 921600
monitor_speed = 115200

; ----- Flash / partitions -----
; Use the same 16MB audio partition Waveshare examples use (put esp_sr_16.csv into project root)
board_build.partitions = esp_sr_16.csv

; ----- Build flags -----
build_flags =
    -DLV_CONF_INCLUDE_SIMPLE
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DCORE_DEBUG_LEVEL=1    ; 0 = no logs, 1..5 = more verbose

; ----- Libraries -----
lib_deps =
    ; LVGL 8 (Waveshare demos target v8, not v9)
    lvgl/lvgl@^8.3.10

    ; ESP32-audioI2S directly from GitHub (avoids darwin_arm64 registry issue)
    git+https://github.com/schreibfaul1/ESP32-audioI2S.git

    ; (optional) remove these if you don't use them:
    bblanchon/ArduinoJson@^7.0.0
    fastled/FastLED@^3.6.0
